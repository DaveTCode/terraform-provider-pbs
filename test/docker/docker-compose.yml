services:
  pbs:
    image: ghcr.io/davetcode/pbs-docker:latest
    container_name: pbs
    hostname: pbs
    environment:
      - PBS_START_MOM=1
      - PBS_ROOT_PASSWORD=pbs
    ports:
      - "2222:22"
    networks:
    - default
    tty: true
    command: bash

  # Additional compute nodes for testing node creation
  compute1:
    image: docker.io/ubuntu:20.04
    container_name: compute1
    hostname: compute1
    networks:
    - default
    tty: true
    command: bash
    depends_on:
      - pbs

  compute2:
    image: docker.io/ubuntu:20.04
    container_name: compute2
    hostname: compute2
    networks:
    - default
    tty: true
    command: bash
    depends_on:
      - pbs

  compute3:
    image: docker.io/ubuntu:20.04
    container_name: compute3
    hostname: compute3
    networks:
    - default
    tty: true
    command: bash
    depends_on:
      - pbs

  node1:
    image: docker.io/ubuntu:20.04
    container_name: node1
    hostname: node1
    networks:
    - default
    tty: true
    command: bash
    depends_on:
      - pbs

  node2:
    image: docker.io/ubuntu:20.04
    container_name: node2
    hostname: node2
    networks:
    - default
    tty: true
    command: bash
    depends_on:
      - pbs
